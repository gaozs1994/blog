
(一)财务&渠道迭代
任务 1：【WMS/FMS-报表中心】多个模块页面排序调整。
    a. 调整多个收入模块查询、导出的排序顺序，按照确认收入月份正序输出
任务 2：【FMS/WMS-物流收入/操作收入】列表和导出优化。
    a. 物流收入：列表、导出、导出任务新增物流产品字段，收入数据汇总导出新增仓库代码维度
    b. 操作费收入：导出、导出任务新增审批状态字段
任务 3：【WMS-账单汇总】多个页签及性能优化。
    a. 账单汇总列表查询优化，添加关联表字段索引(已添加，)
    b. 美国账单模板的物流面单费页签新增"州/State"
任务 4: 【FMS】各收入页面性能优化。
    a. 多个收入模块的查询、导出、金额汇总、统计条数等查询接口切换selectDB进行查询。


(二)生产值班
任务 1: 【FMS-物流成本明细】部分退件单据没有匹配出对应的跟踪号。
    解决方案: 历史遗留问题，天文那边在修复，查出空跟踪号的退件单据，提交更新SQL工单修复。
任务 2: 【FMS-物流成本明细】确认成本金额数据匹配顺序错误。
任务 3：【FMS-物流成本明细】相同单据的预估成本和确认成本未匹配上。
    产生原因: 刘俊杰那边排除原因是事务隔离级别(未提交读)问题，跑批任务事务可能未提交完，此时启动另一个跑批任务因MySQL默认事务隔离级别为可重复读，在拉取数据库成本明细时读取不到未提交部分数据，导致数据匹配不上。
    排查过程1：因拉取成本明细是采用多线程Future方式的，所以事务隔离级别范围覆盖，只能解决主线程的事务，子线程拉取还是用的默认事务隔离级别。
    排查过程2：后面排查XXL跑数日志记录的数据量，同个月份的跑数任务拉取成本明细的数据量跟跑批间隔时长成正比，初步排查可能是批处理的数据量太大导致立即执行下个跑数任务无法命中数据。
    解决方案: 取消事务，并拉长跑数任务间隔
任务 4: 物流费用对账202501存在对账中的数据，需要初始化重新对账，跑数进FMS物流成本
    解决方案: 找出202501后对账中的数据，并提交SQL工单初始化，重新对账审批
任务 5: 物流成本跑数时，对于无、第三方标签的预估成本同维度同发票号金额直接覆盖更新，需要对同发票号预估成本进行累加
    解决方案：物流成本明细表新增对账ID记录字段，避免重复拉数幂等问题。
任务 6：物流成本跑数时，无、第三方标签新增预估成本重复问题
任务 7：由于FMS映射关系更新，历史推入FMS的数据需同步更新
    解决方案：物流费用对账表、费用单据表指定订单初始化更新时间为当前时间，重新拉数

```sql
-- 账单汇总任务表:添加关联表字段索引
ALTER TABLE wpglb_bms.fee_bill_summary_customer
  ADD INDEX idx_summary_id (summary_id);
ALTER TABLE wpglb_bms.fee_bill_summary_warehouse
  ADD INDEX idx_summary_id (summary_id);
ALTER TABLE wpglb_bms.fee_bill_summary_attached
  ADD INDEX idx_summary_id (summary_id);
```



